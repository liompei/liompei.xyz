---
title: 如何让美团外卖自动下单-自动化方案
date: 2023-06-05
description: 美团外卖自动化探索
---

### 前言

此技术文章包含了对某软件的自动化操作可能违规的内容。我想明确指出，该文章是基于学习和分享的目的，以探索相关技术。我不承担任何因为这些操作可能带来的法律责任。

在我的文章中，我强调了对法律合规性的重视，并鼓励读者在进行任何自动化操作之前仔细了解并遵守相关的法律法规。我鼓励读者将我的文章作为学习的参考，并在实践过程中始终保持遵守法律的原则。

请记住，每个人都有责任在技术探索和分享中遵守适用的法律规定。我鼓励读者在进行任何自动化操作之前，咨询法律专业人士，以确保自己的行为合法合规。我的文章旨在促进知识的传播和技术的学习，但不对读者的行为或后果承担法律责任。

## 需求分析

## 方案选择

1. 美团开发者API
2. Hook
3. 自动化

### 1.美团开发者API

https://developer.meituan.com/docs/biz

申请了美团开发者也电话和审核人员聊过了，美团暂不开放自动下单接口。😅

### 2.Hook

Android Hook（Android钩子）是一种在Android应用程序中拦截和修改方法调用的技术。通过使用Hook技术，开发人员可以在应用程序的运行过程中插入自定义的代码，以实现对目标方法的监视、修改或替换。这种技术通常用于实现应用程序的动态行为修改、性能优化、调试和安全增强等方面。

在Android上，常用的Hook技术包括以下几种：

1. Native Hook：

Native Hook通过修改应用程序的本地库（Native Library）来实现对方法的拦截和修改。通过在目标方法的入口处插入自定义的代码，可以监视和修改方法的行为。

2. Framework Hook：

Framework Hook通过对Android系统的框架层进行修改和扩展来实现对应用程序的Hook。通过使用Java的反射机制来动态修改目标方法。通过获取目标类的引用，然后使用反射机制获取目标方法，并替换或修改其行为。这种Hook技术通常需要对Android系统进行修改，因此需要具备系统级权限。

3. Inline Hook：

Inline Hook是一种底层的Hook技术，通过修改目标方法的机器码来实现对方法的拦截和修改。这种技术需要对应用程序的底层代码进行修改，因此需要高级的技术和特殊的权限。

当然美团技术团队也不是吃素的，对Xposed有做检测，[Android Hook技术防范漫谈](https://tech.meituan.com/2018/02/02/android-anti-hooking.html)

这里先按下不表，本文主要讨论自动化方案的实现。

### 3.自动化

我选择了易于上手的[AutoX.js](http://doc.autoxjs.com/#/) ，当然你也可以使用 Appium 、PyAutoGUI 等其他框架，实现原理基本一致。

## 开发过程

一个完整下单的最小路径如下：

-> 打开美团
-> 点击外卖
-> 点击美食
-> 点击店铺
-> 点菜
-> 点击去结算
-> 修改配送地址和送达时间
-> 选择红包
-> 添加备注和餐具数量
-> 提交订单和支付